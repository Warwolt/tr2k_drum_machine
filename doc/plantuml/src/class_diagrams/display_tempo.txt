@startuml

skinparam linetype ortho

title Display Tempo


''' Class definitions '''

Package "Presentation"
{
	Package "TempoControl"
	{
		class TempoControlView
		{
			update()
		}

		interface TempoKnob
		{
			beatsPerMinuteRange : BeatsPerMinute
			getSelectedTempo() : BeatsPerMinute
		}
	}
}

Package "HardwareAbstractionLayer"
{
	interface FourDigitDisplay
	{
		clear()
		setNumber(Integer)
	}
}

Package "Drivers"
{
	class SegmentDisplay75HC595 << adapter >>
	{
		clear()
		setNumber(BeatsPerMinute)
		selectDigit(Integer)
		writeSegmentData()
		writeDigitData()
	}

	class Spi
	{
		send(Byte)
	}

	class GpioPin
	{
		set()
		clear()
	}
}

Package "Infrastructure"
{
	class InterruptManager
	{
		enableInterruptsGlobally()
		disableInterruptsGlobally()
		setHandler(InterruptHandler, InterruptRequest)
	}
}

''' Class notes '''
note top of InterruptManager: Manages timing for event \ndriven peripheral drivers
note top of TempoControlView: Reads input from\nTempoKnob and outputs\nvalue on FourDigitDisplay
note bottom of TempoKnob: Input for tempo value to display

''' Class relations '''

TempoControlView -down-> TempoKnob
TempoControlView -down-> FourDigitDisplay

FourDigitDisplay <|.. SegmentDisplay75HC595
SegmentDisplay75HC595 -> Spi
SegmentDisplay75HC595 -left-> GpioPin

InterruptManager .down.> SegmentDisplay75HC595
InterruptManager ..> Spi

@enduml
